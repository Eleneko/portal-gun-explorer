<mat-card *ngIf="character" class="details-card">
  <button mat-icon-button class="close-button" (click)="clearCharacter()">
    <mat-icon>close</mat-icon>
  </button>

  <mat-card-header>
    <mat-card-title>{{ character.name }}</mat-card-title>
    <mat-card-subtitle
      >{{ character.species }} - {{ character.status }}</mat-card-subtitle
    >
  </mat-card-header>

  <img mat-card-image [src]="character.image" [alt]="character.name" />

  <!-- ORIGEN -->
  <mat-accordion>
    <mat-expansion-panel
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
    >
      <mat-expansion-panel-header>
        <mat-panel-title> Origin </mat-panel-title>
        <mat-panel-description>
          {{ origin?.name || "Unknown" }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p>
        <strong>Tipo:</strong> {{ origin?.type || "Unknown" }}<br />
        <strong>Dimensión:</strong> {{ origin?.dimension || "Unknown" }}
      </p>
      <!-- RESIDENTES -->
      <p *ngIf="originResidents.length > 0">
        <strong>Residents: </strong>
        <app-tag [items]="originResidentNames"></app-tag>
      </p>
      <p
        *ngIf="originResidents.length === 0 && origin?.residents?.length === 0"
      >
        There are no residents.
      </p>
    </mat-expansion-panel>
  </mat-accordion>

  <!-- LOCALIZACION -->
  <mat-accordion>
    <mat-expansion-panel
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
    >
      <mat-expansion-panel-header>
        <mat-panel-title> Localización </mat-panel-title>
        <mat-panel-description>
          {{ location?.name || "Unknown" }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p>
        <strong>Tipo:</strong> {{ location?.type || "Unknown" }}<br />
        <strong>Dimensión:</strong> {{ location?.dimension || "Unknown" }}
      </p>
      <!-- RESIDENTES -->
      <p *ngIf="locationResidents.length > 0">
        <strong>Residents: </strong>
        <app-tag [items]="locationResidentNames"></app-tag>
      </p>
      <p
        *ngIf="
          locationResidents.length === 0 && location?.residents?.length === 0
        "
      >
      There are no residents.
    </p>
    </mat-expansion-panel>
  </mat-accordion>

  <!-- EPISODIO -->
  <mat-accordion>
    <mat-expansion-panel
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
    >
      <mat-expansion-panel-header>
        <mat-panel-title> Episode </mat-panel-title>
        <mat-panel-description>
          {{ episode?.name || "Unknown" }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p *ngIf="episode">
        <strong>Episode: </strong>{{ episode.episode }}<br />
        <strong>Air date: </strong>{{ episode.air_date }}
      </p>
      <p *ngIf="!episode">No episodes.</p>
    </mat-expansion-panel>
  </mat-accordion>
</mat-card>
